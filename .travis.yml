language: cpp
compiler: gcc
dist: xenial

addons:
  apt:
    packages:
      - libboost-dev
      - qt5-default

script:
  - qmake
  - make -j`nproc`
  - make INSTALL_ROOT=appdir install

after_success:
  - wget --continue --no-verbose "https://github.com/probonopd/linuxdeployqt/releases/download/continuous/linuxdeployqt-continuous-x86_64.AppImage"
  - chmod a+x linuxdeployqt-continuous-x86_64.AppImage
  - unset QTDIR; unset QT_PLUGIN_PATH; unset LD_LIBRARY_PATH
  - export VERSION=`git rev-parse --short HEAD`
  - ./linuxdeployqt-continuous-x86_64.AppImage appdir/usr/share/applications/*.desktop -appimage -extra-plugins=iconengines/libqsvgicon.so
